*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     1
PROGRAM NAME =

    1                               1     ;       ***************************************************
    2                               2     ;       ***                                             ***
    3                               3     ;       ***                                             ***
    4                               4     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送,mem,dp)     ***
    5                               5     ;       ***                                             ***
    6                               6     ;       ***                                             ***
    7                               7     ;       ***************************************************
 2082                              16     
 2083                              17     ;       ===========================================
 2084                              18     ;       ===             ET1 TOREND DATA         ===
 2085                              19     ;       ===========================================
 2086                              20             .IMPORT         _CPUA_SND_INI_ET1       ;INITAL CODE REQ
 2087                              21             .IMPORT         _CPUA_RCV_INI_ET1       ;INITAL CODE ACK
 2088                              22             .IMPORT         _CPUA_SND_REQ_ET1       ;H'12345678(req)
 2089                              23             .IMPORT         _CPUA_RCV_ACK_ET1       ;H'87654321(ack)
 2090                              24             .IMPORT         _CPUA_SND_REQ_ADR       ;TOPADRESS (192K+32K 256Kbyte)
 2091                              25             .IMPORT         _CPUA_SND_REQ_CNT       ;1~128個
 2092                              26             .IMPORT         _CPUA_SND_DAT           ;(256byte MAX)
 2093                              27             .IMPORT         _CPUA_SND_END           ;
 2094                              28     
 2095                              29     
 2096                              30             .EXPORT         _ET1_CPU_MAIN_MOV
 2097                              31             .EXPORT         _ET1_CPU_HIGH_MOV
 2098                              32     
 2099                              33     
 2100                              34     ;       ***************************************************
 2101                              35     ;       ***                                             ***
 2102                              36     ;       ***                                             ***
 2103                              37     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送)            ***
 2104                              38     ;       ***     (high:TREND)                            ***
 2105                              39     ;       ***                                             ***
 2106                              40     ;       ***                                             ***
 2107                              41     ;       ***************************************************
 2108 00000000                     42             .SECTION        P,CODE                  ;
 2109 00000000                     43             .ALIGN  4                                       ;
 2110 00000000                     44     _ET1_CPU_HIGH_MOV
 2111                              45             SUB_START
 2112 00000000 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2113                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2114 00000002 D105                46             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2115 00000004 6011                47             MOV.W   @R1,R0                                  ;
 2116 00000006 C840                48             TST     #BIT6,R0                                ;
 2117                              49             TST_BIT_OF ET1_CPU_HIGHMV_END                   ;
 2118 00000008 8902                   M           BT      ET1_CPU_HIGHMV_END
 2119                              50     
 2120                              51     ;       ---------- ET1/CPUA ﾃﾞｰﾀ転送--------------
 2121                              52             FAR_JSR #_ET1_TRD_DATA_SEND,R0
 2122 0000000A D004                   M           MOV.L   #_ET1_TRD_DATA_SEND,R0          ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2123 0000000C 400B                   M           JSR     @R0                     ;
 2124 0000000E 0009                   M           NOP                                     ;
 2125                              53     
 2126 00000010                     54     ET1_CPU_HIGHMV_END
 2127                              55             SUB_END
 2128                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2129 00000010 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2130                              56             M_RTS
 2131 00000012 000B                   M           RTS                             ;RTSの後ろの
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     2
PROGRAM NAME =

 2132 00000014 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2133                              57     
 2134                              58     ;       ***************************************************
 2135                              59     ;       ***                                             ***
 2136                              60     ;       ***                                             ***
 2137                              61     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送)            ***
 2138                              62     ;       ***     (MAIN:SV)                               ***
 2139                              63     ;       ***                                             ***
 2140                              64     ;       ***************************************************
 2141                                     ***** BEGIN-POOL *****
 2142 00000016 0000                       ALIGNMENT CODE
 2143 00000018 00000000                   DATA FOR SOURCE-LINE 46
 2144 0000001C 00000000                   DATA FOR SOURCE-LINE 52
 2145                                     ***** END-POOL *****
 2146 00000020                     65     _ET1_CPU_MAIN_MOV
 2147                              66             SUB_START
 2148 00000020 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2149                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2150                              67     
 2151 00000022 D104                68             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2152 00000024 6011                69             MOV.W   @R1,R0                                  ;
 2153 00000026 C840                70             TST     #BIT6,R0                                ;
 2154                              71             TST_BIT_ON ET1_CPU_MNMV_100                     ;
 2155 00000028 8B08                   M           BF      ET1_CPU_MNMV_100
 2156                              72             FAR_JSR #_ET1_INITAL_CHK,R0                     ;
 2157 0000002A D003                   M           MOV.L   #_ET1_INITAL_CHK,R0             ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2158 0000002C 400B                   M           JSR     @R0                     ;
 2159 0000002E 0009                   M           NOP                                     ;
 2160                              73             M_BRA   ET1_CPU_MNMV_END                        ;
 2161 00000030 A00F                   M           BRA     ET1_CPU_MNMV_END
 2162 00000032 0009                   M           NOP
 2163                                     ***** BEGIN-POOL *****
 2164 00000034 00000000                   DATA FOR SOURCE-LINE 68
 2165 00000038 00000000                   DATA FOR SOURCE-LINE 72
 2166                                     ***** END-POOL *****
 2167 0000003C                     74     ET1_CPU_MNMV_100:
 2168                              75             FAR_JSR #_ET1_INIEND_MOVE,R0                    ;
 2169 0000003C D007                   M           MOV.L   #_ET1_INIEND_MOVE,R0            ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2170 0000003E 400B                   M           JSR     @R0                     ;
 2171 00000040 0009                   M           NOP                                     ;
 2172                              76     
 2173                              77     
 2174 00000042 D107                78             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2175 00000044 6011                79             MOV.W   @R1,R0                                  ;
 2176 00000046 2008                80             TST     R0,R0                                   ;
 2177                              81             TST_BIT_ON ET1_CPU_MNMV_200                     ;
 2178 00000048 8B02                   M           BF      ET1_CPU_MNMV_200
 2179 0000004A D105                82             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2180 0000004C 9004                83             MOV.W   #BIT0,R0                                ;
 2181 0000004E 2101                84             MOV.W   R0,@R1                                  ;
 2182 00000050                     85     ET1_CPU_MNMV_200:                                       ;
 2183 00000050 0009                86             NOP
 2184                              87     
 2185 00000052                     88     ET1_CPU_MNMV_END:
 2186                              89             SUB_END
 2187                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2188 00000052 4F26                   M           LDS.L   @R15+,PR                ;[必要]
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     3
PROGRAM NAME =

 2189                              90             M_RTS
 2190 00000054 000B                   M           RTS                             ;RTSの後ろの
 2191 00000056 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2192                              91     
 2193                              92     
 2194                              93     ;       ***************************************************
 2195                              94     ;       ***                                             ***
 2196                              95     ;       ***                                             ***
 2197                              96     ;       ***     INITAL                                  ***
 2198                              97     ;       ***     (MAIN)                                  ***
 2199                              98     ;       ***                                             ***
 2200                              99     ;       ***************************************************
 2201                                     ***** BEGIN-POOL *****
 2202 00000058 0001                       DATA FOR SOURCE-LINE 83
 2203 0000005A 0000                       ALIGNMENT CODE
 2204 0000005C 00000000                   DATA FOR SOURCE-LINE 75
 2205 00000060 00000000                   DATA FOR SOURCE-LINE 78,82
 2206                                     ***** END-POOL *****
 2207 00000064                    100     _ET1_INITAL_CHK:
 2208                             101             SUB_START
 2209 00000064 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2210                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2211 00000066 D108               102             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2212 00000068 6011               103             MOV.W   @R1,R0                                  ;
 2213 0000006A C840               104             TST     #BIT6,R0                                ;
 2214                             105             TST_BIT_ON ET1_INIT_CHK_END                     ;
 2215 0000006C 8B08                   M           BF      ET1_INIT_CHK_END
 2216                             106     
 2217 0000006E D107               107             MOV.L   #_CPUA_RCV_INI_ET1,R1           ;
 2218 00000070 6012               108             MOV.L   @R1,R0                                  ;
 2219 00000072 D407               109             MOV.L   #_ET1_INIT_ACK,R4                       ;
 2220 00000074 3040               110             CMP/EQ  R4,R0                                   ;
 2221 00000076 8B03               111             BF      ET1_INIT_CHK_END                        ;未完了
 2222                             112     
 2223                             113             MEM1_BIT0_TO_BIT7_ORSET MEM=_ET1_INITAL_FLG,LG=W,BIT=BIT6,WKREG=R1      ;bit-set
 2224 00000078 D103                   M           MOV.L   #_ET1_INITAL_FLG,R1             ;
 2225 0000007A 6011                   M           MOV.W   @R1,R0          ;
 2226 0000007C CB40                   M           OR      #BIT6,R0                ;
 2227 0000007E 2101                   M           MOV.W   R0,@R1          ;
 2228                             114     
 2229 00000080                    115     ET1_INIT_CHK_END:
 2230                             116             SUB_END
 2231                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2232 00000080 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2233                             117             M_RTS
 2234 00000082 000B                   M           RTS                             ;RTSの後ろの
 2235 00000084 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2236                             118     
 2237                             119     ;       ***********************************
 2238                             120     ;       ***                             ***
 2239                             121     ;       ***     INITAL-CODE             ***
 2240                             122     ;       ***                             ***
 2241                             123     ;       ***********************************
 2242                                     ***** BEGIN-POOL *****
 2243 00000086 0000                       ALIGNMENT CODE
 2244 00000088 00000000                   DATA FOR SOURCE-LINE 102,113
 2245 0000008C 00000000                   DATA FOR SOURCE-LINE 107
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     4
PROGRAM NAME =

 2246 00000090 56789ABC                   DATA FOR SOURCE-LINE 109
 2247                                     ***** END-POOL *****
 2248 00000094                    124     _ET1_INIEND_MOVE:
 2249                             125             SUB_START
 2250 00000094 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2251                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2252                             126     
 2253 00000096 D003               127             MOV.L   #_ET1_INIT_REQ,R0
 2254                             128             REG_MOV_TO_MEM  DST_ADR=_CPUA_SND_INI_ET1,L1=L,DT_REG=R0,WKREG1=R1
 2255 00000098 D103                   M           MOV.L   #_CPUA_SND_INI_ET1,R1   ;DST_ADR
 2256 0000009A 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2257                             129     
 2258                             130     
 2259                             131             SUB_END
 2260                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2261 0000009C 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2262                             132             M_RTS
 2263 0000009E 000B                   M           RTS                             ;RTSの後ろの
 2264 000000A0 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2265                             133     
 2266                             134     ;       ***********************************
 2267                             135     ;       ***                             ***
 2268                             136     ;       ***     Input R2                ***
 2269                             137     ;       ***                             ***
 2270                             138     ;       ***********************************
 2271                             139     
 2272                             140     
 2273                             141     ;       ***********************************
 2274                             142     ;       ***                             ***
 2275                             143     ;       ***     CPUA-->ET1              ***
 2276                             144     ;       ***             DATA,TRIG       ***
 2277                             145     ;       ***                             ***
 2278                             146     ;       ***********************************
 2279                             147     ;       128byte単位で7FFFまで転送する
 2280                             148     
 2281                             149             .IMPORT _TREND_INFO_TOP                                         ;0c180000
 2282                             150             .IMPORT _TREND_DATA_END
 2283                             151     
 2284                             152             .IMPORT _SNAPBUF_TOP    ;
 2285                             153             .IMPORT _SEQAB_DP_TOP
 2286                             154     
 2287                                     ***** BEGIN-POOL *****
 2288 000000A2 0000                       ALIGNMENT CODE
 2289 000000A4 12345678                   DATA FOR SOURCE-LINE 127
 2290 000000A8 00000000                   DATA FOR SOURCE-LINE 128
 2291                                     ***** END-POOL *****
 2292          00000100           155     _CPUA_ET1_BLK           .EQU    _ET1_CPUAB_BUF_MAX                      ;
 2293                             156     _CPUA_ET1_ADRMAX        .DEFINE "(_TREND_DATA_END-_TREND_INFO_TOP)"     ;0c1c08d0-0c180100
                                          =00407D0
 2294          00008000           157     _CPUA_ET1_OFFSET        .EQU    H'8000                                  ;
 2295                             158     
 2296                             159     _CPUA_ET1_ADRMAXSNP     .DEFINE "640*480"                               ;H'25800()WORD=307
                                          200BYTE(4B000)
 2297          00000000           160     _CPUA_ET1_OFFSETSNP     .EQU    H'0                                     ;0C1E0000~C22AFFF
 2298                             161     
 2299                             162     ;186368
 2300                             163     
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     5
PROGRAM NAME =

 2301                             164     ;通信データがなくなったのときに切り替える
 2302                             165     
 2303 000000AC                    166     _ET1_TRD_DATA_SEND:
 2304                             167             SUB_START
 2305 000000AC 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2306                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2307 000000AE D103               168             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2308 000000B0 6011               169             MOV.W   @R1,R0                                  ;
 2309 000000B2 2008               170             TST     R0,R0                                   ;
 2310                             171             TST_BIT_ON ET1_TRD_DATASEND_100                 ;
 2311 000000B4 8B04                   M           BF      ET1_TRD_DATASEND_100
 2312                             172             M_BRA   ET1_TRD_DATASEND_EXT                    ;
 2313 000000B6 A095                   M           BRA     ET1_TRD_DATASEND_EXT
 2314 000000B8 0009                   M           NOP
 2315                                     ***** BEGIN-POOL *****
 2316 000000BA 0000                       ALIGNMENT CODE
 2317 000000BC 00000000                   DATA FOR SOURCE-LINE 168
 2318                                     ***** END-POOL *****
 2319 000000C0                    173     ET1_TRD_DATASEND_100:
 2320 000000C0 C802               174             TST     #BIT1,R0                                ;
 2321                             175             TST_BIT_ON ET1_TRD_DATASEND_150                 ;
 2322 000000C2 8B19                   M           BF      ET1_TRD_DATASEND_150
 2323                             176     
 2324                             177             MEM1_BIT0_TO_BIT7_ORSET MEM=_CPU_REQ_DAT_FLG,LG=W,BIT=BIT1,WKREG=R1     ;bit-set
 2325 000000C4 D108                   M           MOV.L   #_CPU_REQ_DAT_FLG,R1            ;
 2326 000000C6 6011                   M           MOV.W   @R1,R0          ;
 2327 000000C8 CB02                   M           OR      #BIT1,R0                ;
 2328 000000CA 2101                   M           MOV.W   R0,@R1          ;
 2329 000000CC 200A               178             XOR     R0,R0
 2330                             179             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_CNT,L1=L,DT_REG=R0,WKREG1=R1
 2331 000000CE D107                   M           MOV.L   #_CPU_REQ_DAT_CNT,R1    ;DST_ADR
 2332 000000D0 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2333                             180     
 2334                             181     ;       --- 2013-12-12[MC]-- SNAP
 2335 000000D2 222A               182             XOR     R2,R2                                   ;通常
 2336 000000D4 D106               183             MOV.L   #_SEQAB_DP_TOP+151*2,R1                 ;
 2337 000000D6 6011               184             MOV.W   @R1,R0                                  ;
 2338 000000D8 C801               185             TST     #BIT0,R0                                ;ｽﾅｯﾌﾟﾓｰﾄﾞ
 2339                             186             TST_BIT_OF ET1_TRD_DATASEND_120                 ;
 2340 000000DA 8900                   M           BT      ET1_TRD_DATASEND_120
 2341 000000DC 9203               187             MOV.W   #1,R2                                   ;
 2342 000000DE                    188     ET1_TRD_DATASEND_120:
 2343 000000DE D105               189             MOV.L   #_SNAP_MODE_SEL,R1                      ;
 2344 000000E0 2121               190             MOV.W   R2,@R1                                  ;
 2345                             191     
 2346                             192             M_BRA   ET1_TRD_DATASEND_EXT                    ;
 2347 000000E2 A07F                   M           BRA     ET1_TRD_DATASEND_EXT
 2348 000000E4 0009                   M           NOP
 2349                             193     
 2350                                     ***** BEGIN-POOL *****
 2351 000000E6 0001                       DATA FOR SOURCE-LINE 187
 2352 000000E8 00000000                   DATA FOR SOURCE-LINE 177
 2353 000000EC 00000000                   DATA FOR SOURCE-LINE 179
 2354 000000F0 00000000                   DATA FOR SOURCE-LINE 183
 2355 000000F4 00000000                   DATA FOR SOURCE-LINE 189
 2356                                     ***** END-POOL *****
 2357 000000F8                    194     ET1_TRD_DATASEND_150:
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     6
PROGRAM NAME =

 2358 000000F8 D80B               195             MOV.L   #_CPUA_SND_REQ_ET1,R8                   ;
 2359 000000FA D90C               196             MOV.L   #_CPUA_RCV_ACK_ET1,R9                   ;
 2360 000000FC 6082               197             MOV.L   @R8,R0                                  ;
 2361 000000FE 6192               198             MOV.L   @R9,R1                                  ;
 2362 00000100 3010               199             CMP/EQ  R1,R0                                   ;
 2363 00000102 8B6F               200             BF      ET1_TRD_DATASEND_EXT                    ;NOT EQ.WAIT
 2364                             201     ;       -----------------------------------------------
 2365 00000104 D50A               202             MOV.L   #_CPU_REQ_DAT_CNT,R5                    ;
 2366 00000106 6252               203             MOV.L   @R5,R2                                  ;
 2367 00000108 D30A               204             MOV.L   #((_TREND_DATA_END-_TREND_INFO_TOP)/_CPUA_ET1_BLK)+1,R3 ;**[SNAP]
 2368                             205     
 2369                             206     ;================== SNAP CHANGE START=============
 2370                             207             PUSH_REG1 R0                    ;
 2371 0000010A 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2372                                 M                                           ;REG=>[SP]
 2373                                 M                                           ;"-4" FF,FF,FF,FC
 2374                             208             PUSH_REG1 R1                    ;
 2375 0000010C 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2376                                 M                                           ;REG=>[SP]
 2377                                 M                                           ;"-4" FF,FF,FF,FC
 2378 0000010E D10A               209             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2379 00000110 6011               210             MOV.W   @R1,R0                  ;
 2380 00000112 2008               211             TST     R0,R0                   ;
 2381                             212             TST_BIT_OF SNAP_050             ;
 2382 00000114 8900                   M           BT      SNAP_050
 2383 00000116 D309               213             MOV.L   #(640*480/_CPUA_ET1_BLK)+1,R3   ;**[SNAP]
 2384 00000118                    214     SNAP_050                                ;
 2385                             215             POP_REG1 R1                     ;
 2386                                 M                                   ; RE"+4" 00,00,00,04
 2387 00000118 61F6                   M           MOV.L   @R15+,R1        ;
 2388                             216             POP_REG1 R0                     ;
 2389                                 M                                   ; RE"+4" 00,00,00,04
 2390 0000011A 60F6                   M           MOV.L   @R15+,R0        ;
 2391                             217     ;================== SNAP CHANGE END=============
 2392                             218     
 2393 0000011C 3326               219             CMP/HI  R2,R3                                   ;R2 < R3
 2394 0000011E 890F               220             BT      ET1_TRD_DATASEND_200                    ;
 2395 00000120 222A               221             XOR     R2,R2                                   ;
 2396 00000122 2522               222             MOV.L   R2,@R5                                  ;
 2397                             223             M_BRA   ET1_TRD_DATASEND_900                    ;
 2398 00000124 A058                   M           BRA     ET1_TRD_DATASEND_900
 2399 00000126 0009                   M           NOP
 2400                             224     
 2401                                     ***** BEGIN-POOL *****
 2402 00000128 00000000                   DATA FOR SOURCE-LINE 195
 2403 0000012C 00000000                   DATA FOR SOURCE-LINE 196
 2404 00000130 00000000                   DATA FOR SOURCE-LINE 202
 2405 00000134 00000000                   DATA FOR SOURCE-LINE 204
 2406 00000138 00000000                   DATA FOR SOURCE-LINE 209
 2407 0000013C 000004B1                   DATA FOR SOURCE-LINE 213
 2408                                     ***** END-POOL *****
 2409 00000140                    225     ET1_TRD_DATASEND_200:                                   ;Input R2
 2410                             226     
 2411                             227     
 2412 00000140 D515               228             MOV.L   #_TREND_INFO_TOP,R5                     ;**[SNAP]
 2413                             229     
 2414                             230     ;================== SNAP CHANGE START=============
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     7
PROGRAM NAME =

 2415                             231             PUSH_REG1 R0                    ;
 2416 00000142 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2417                                 M                                           ;REG=>[SP]
 2418                                 M                                           ;"-4" FF,FF,FF,FC
 2419                             232             PUSH_REG1 R1                    ;
 2420 00000144 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2421                                 M                                           ;REG=>[SP]
 2422                                 M                                           ;"-4" FF,FF,FF,FC
 2423 00000146 D115               233             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2424 00000148 6011               234             MOV.W   @R1,R0                  ;
 2425 0000014A 2008               235             TST     R0,R0                   ;
 2426                             236             TST_BIT_OF SNAP_100             ;
 2427 0000014C 8900                   M           BT      SNAP_100
 2428 0000014E D514               237             MOV.L   #_SNAPBUF_TOP,R5        ;
 2429 00000150                    238     SNAP_100                                ;
 2430                             239             POP_REG1 R1                     ;
 2431                                 M                                   ; RE"+4" 00,00,00,04
 2432 00000150 61F6                   M           MOV.L   @R15+,R1        ;
 2433                             240             POP_REG1 R0                     ;
 2434                                 M                                   ; RE"+4" 00,00,00,04
 2435 00000152 60F6                   M           MOV.L   @R15+,R0        ;
 2436                             241     ;================== SNAP CHANGE END=============
 2437                             242     
 2438                             243     
 2439 00000154 931E               244             MOV.W   #_CPUA_ET1_BLK,R3                       ;256
 2440 00000156 332D               245             DMULS.L R2,R3                                   ;CNT*128byte
 2441 00000158 061A               246             STS.L   MACL,R6                                 ;
 2442                             247     
 2443 0000015A 4301               248             SHLR    R3
 2444 0000015C D111               249             MOV.L   #_CPUA_SND_REQ_CNT,R1                   ;
 2445 0000015E 2132               250             MOV.L   R3,@R1                                  ;WORD個数
 2446 00000160 D111               251             MOV.L   #_CPUA_SND_REQ_ADR,R1                   ;
 2447 00000162 D412               252             MOV.L   #_CPUA_ET1_OFFSET,R4                    ;**[SNAP]
 2448                             253     
 2449                             254     ;================== SNAP CHANGE START=============
 2450                             255             PUSH_REG1 R0                    ;
 2451 00000164 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2452                                 M                                           ;REG=>[SP]
 2453                                 M                                           ;"-4" FF,FF,FF,FC
 2454                             256             PUSH_REG1 R1                    ;
 2455 00000166 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2456                                 M                                           ;REG=>[SP]
 2457                                 M                                           ;"-4" FF,FF,FF,FC
 2458 00000168 D10C               257             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2459 0000016A 6011               258             MOV.W   @R1,R0                  ;
 2460 0000016C 2008               259             TST     R0,R0                   ;
 2461                             260             TST_BIT_OF SNAP_200             ;
 2462 0000016E 8900                   M           BT      SNAP_200
 2463 00000170 D40F               261             MOV.L   #_CPUA_ET1_OFFSETSNP,R4 ;
 2464 00000172                    262     SNAP_200                                ;
 2465                             263             POP_REG1 R1                     ;
 2466                                 M                                   ; RE"+4" 00,00,00,04
 2467 00000172 61F6                   M           MOV.L   @R15+,R1        ;
 2468                             264             POP_REG1 R0                     ;
 2469                                 M                                   ; RE"+4" 00,00,00,04
 2470 00000174 60F6                   M           MOV.L   @R15+,R0        ;
 2471                             265     ;================== SNAP CHANGE END=============
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     8
PROGRAM NAME =

 2472                             266     
 2473 00000176 346C               267             ADD     R6,R4                                   ;
 2474 00000178 2142               268             MOV.L   R4,@R1                                  ;SAVE.ADRESS +8000
 2475 0000017A 356C               269             ADD     R6,R5                                   ;
 2476 0000017C D70D               270             MOV.L   #_CPUA_SND_DAT,R7                       ;
 2477                             271     
 2478 0000017E                    272     ET1_TRD_DATASEND_LOP:                                   ;ﾃﾞｰﾀ
 2479 0000017E 2338               273             TST     R3,R3                                   ;
 2480                             274             TST_BIT_OF ET1_TRD_DATASEND_800
 2481 00000180 891A                   M           BT      ET1_TRD_DATASEND_800
 2482 00000182 6155               275             MOV.W   @R5+,R1                                 ;ﾃﾞｰﾀ元
 2483                             276     
 2484                             277     ;debug
 2485 00000184 2118               278             TST     R1,R1
 2486                             279             TST_BIT_OF DEBUG_AAA
 2487 00000186 8900                   M           BT      DEBUG_AAA
 2488 00000188 0009               280             NOP
 2489 0000018A                    281     DEBUG_AAA
 2490 0000018A 2711               282             MOV.W   R1,@R7                                  ;dpram
 2491 0000018C 7702               283             ADD     #2,R7
 2492 0000018E 73FF               284             ADD     #-1,R3
 2493                             285             M_BRA   ET1_TRD_DATASEND_LOP
 2494 00000190 AFF5                   M           BRA     ET1_TRD_DATASEND_LOP
 2495 00000192 0009                   M           NOP
 2496                             286     
 2497                             287     ;       -------------(HAND)---------------------------------
 2498                                     ***** BEGIN-POOL *****
 2499 00000194 0100                       DATA FOR SOURCE-LINE 244
 2500 00000196 0000                       ALIGNMENT CODE
 2501 00000198 00000000                   DATA FOR SOURCE-LINE 228
 2502 0000019C 00000000                   DATA FOR SOURCE-LINE 233,257
 2503 000001A0 00000000                   DATA FOR SOURCE-LINE 237
 2504 000001A4 00000000                   DATA FOR SOURCE-LINE 249
 2505 000001A8 00000000                   DATA FOR SOURCE-LINE 251
 2506 000001AC 00008000                   DATA FOR SOURCE-LINE 252
 2507 000001B0 00000000                   DATA FOR SOURCE-LINE 261
 2508 000001B4 00000000                   DATA FOR SOURCE-LINE 270
 2509                                     ***** END-POOL *****
 2510 000001B8                    288     ET1_TRD_DATASEND_800:
 2511 000001B8 211A               289             XOR     R1,R1
 2512 000001BA 6082               290             MOV.L   @R8,R0                                  ;
 2513 000001BC 2008               291             TST     R0,R0                                   ;
 2514                             292             TST_BIT_ON ET1_TRD_DATASEND_820                 ;
 2515 000001BE 8B00                   M           BF      ET1_TRD_DATASEND_820
 2516 000001C0 D103               293             MOV.L   #_ET1_DATA_COD,R1                       ;
 2517 000001C2                    294     ET1_TRD_DATASEND_820:                                   ;
 2518 000001C2 2812               295             MOV.L   R1,@R8                                  ;NEW REQ
 2519                             296     
 2520 000001C4 D103               297             MOV.L   #_CPU_REQ_DAT_CNT,R1                    ;
 2521 000001C6 6012               298             MOV.L   @R1,R0                                  ;
 2522 000001C8 7001               299             ADD     #1,R0                                   ;
 2523 000001CA 2102               300             MOV.L   R0,@R1                                  ;
 2524                             301             M_BRA   ET1_TRD_DATASEND_EXT
 2525 000001CC A00A                   M           BRA     ET1_TRD_DATASEND_EXT
 2526 000001CE 0009                   M           NOP
 2527                             302     
 2528                             303     ;       -------------(END)---------------------------------
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE     9
PROGRAM NAME =

 2529                                     ***** BEGIN-POOL *****
 2530 000001D0 5A3CC3A5                   DATA FOR SOURCE-LINE 293
 2531 000001D4 00000000                   DATA FOR SOURCE-LINE 297
 2532                                     ***** END-POOL *****
 2533 000001D8                    304     ET1_TRD_DATASEND_900:
 2534 000001D8 200A               305             XOR     R0,R0                                                           ;
 2535                             306             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_FLG,L1=W,DT_REG=R0,WKREG1=R1       ;
 2536 000001DA D104                   M           MOV.L   #_CPU_REQ_DAT_FLG,R1    ;DST_ADR
 2537 000001DC 2101                   M           MOV.W   R0,@R1  ;DST_ADR
 2538 000001DE 200A               307             XOR     R0,R0                                                           ;
 2539                             308             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_CNT,L1=L,DT_REG=R0,WKREG1=R1       ;
 2540 000001E0 D103                   M           MOV.L   #_CPU_REQ_DAT_CNT,R1    ;DST_ADR
 2541 000001E2 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2542                             309     
 2543                             310     
 2544                             311     
 2545                             312     
 2546 000001E4                    313     ET1_TRD_DATASEND_EXT:
 2547                             314             SUB_END
 2548                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2549 000001E4 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2550                             315             M_RTS
 2551 000001E6 000B                   M           RTS                             ;RTSの後ろの
 2552 000001E8 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2553                             316     
 2554                             317     
 2555                             318     
 2556                             319     ;       ***************************************************
 2557                             320     ;       ***                                             ***
 2558                             321     ;       ***                                             ***
 2559                             322     ;       ***             wkram定義                       ***
 2560                             323     ;       ***                                             ***
 2561                             324     ;       ***                                             ***
 2562                             325     ;       ***************************************************
 2563                                     ***** BEGIN-POOL *****
 2564 000001EA 0000                       ALIGNMENT CODE
 2565 000001EC 00000000                   DATA FOR SOURCE-LINE 306
 2566 000001F0 00000000                   DATA FOR SOURCE-LINE 308
 2567                                     ***** END-POOL *****
 2568 00000000                    326             .SECTION        Bwkram1,DATA                    ;
 2569 00000000                    327             .ALIGN  4                                       ;
 2570                             328             .EXPORT         _ET1_INITAL_FLG                 ; SHIMA(h1fは2009-08-13)
 2571 00000000 00000002           329     _ET1_INITAL_FLG         .SRES   2                       ;
 2572                             330     
 2573 00000004                    331             .ALIGN  4                                       ;
 2574 00000004 00000004           332     _CPU_REQ_DAT_CNT        .SRES   4                       ;
 2575 00000008 00000002           333     _CPU_REQ_DAT_FLG        .SRES   2                       ;
 2576 0000000C                    334             .ALIGN  4                                       ;
 2577 0000000C 00000004           335     _CPUA_REQ_OLD           .SRES   4                       ;
 2578 00000010 00000002           336     _SNAP_MODE_SEL          .SRES   2                       ;
 2579                             337     
 2580                             338             .END
  *****TOTAL ERRORS       0
  *****TOTAL WARNINGS     0
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE    10

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

BIT0                                      EQU  00000001     15* 2180  2338 
BIT1                                      EQU  00000002     16* 2320  2327 
BIT10                                     EQU  00000400     25*
BIT11                                     EQU  00000800     26*
BIT12                                     EQU  00001000     27*
BIT13                                     EQU  00002000     28*
BIT14                                     EQU  00004000     29*
BIT15                                     EQU  00008000     30*
BIT16                                     EQU  00010000     31*
BIT17                                     EQU  00020000     32*
BIT18                                     EQU  00040000     33*
BIT19                                     EQU  00080000     34*
BIT2                                      EQU  00000004     17*
BIT20                                     EQU  00100000     35*
BIT21                                     EQU  00200000     36*
BIT22                                     EQU  00400000     37*
BIT23                                     EQU  00800000     38*
BIT24                                     EQU  01000000     39*
BIT25                                     EQU  02000000     40*
BIT26                                     EQU  04000000     41*
BIT27                                     EQU  08000000     42*
BIT28                                     EQU  10000000     43*
BIT29                                     EQU  20000000     44*
BIT3                                      EQU  00000008     18*
BIT30                                     EQU  40000000     45*
BIT31                                     EQU  80000000     46*
BIT4                                      EQU  00000010     19*
BIT5                                      EQU  00000020     20*
BIT6                                      EQU  00000040     21* 2116  2153  2213  2226 
BIT7                                      EQU  00000080     22*
BIT8                                      EQU  00000100     23*
BIT9                                      EQU  00000200     24*
Bwkram1                          Bwkram1  SCT  00000000   2568*
DEBUG_AAA                        P             0000018A   2487  2489*
ET1_CPU_HIGHMV_END               P             00000010   2118  2126*
ET1_CPU_MNMV_100                 P             0000003C   2155  2167*
ET1_CPU_MNMV_200                 P             00000050   2178  2182*
ET1_CPU_MNMV_END                 P             00000052   2161  2185*
ET1_INIT_CHK_END                 P             00000080   2215  2221  2229*
ET1_TRD_DATASEND_100             P             000000C0   2311  2319*
ET1_TRD_DATASEND_120             P             000000DE   2340  2342*
ET1_TRD_DATASEND_150             P             000000F8   2322  2357*
ET1_TRD_DATASEND_200             P             00000140   2394  2409*
ET1_TRD_DATASEND_800             P             000001B8   2481  2510*
ET1_TRD_DATASEND_820             P             000001C2   2515  2517*
ET1_TRD_DATASEND_900             P             000001D8   2398  2533*
ET1_TRD_DATASEND_EXT             P             000001E4   2313  2347  2363  2525  2546*
ET1_TRD_DATASEND_LOP             P             0000017E   2478* 2494 
H_BYTE                                    EQU  00000000     82*
L_BYTE                                    EQU  00000001     81*
NBIT0                                     EQU  000000FE     49*
NBIT1                                     EQU  000000FD     50*
NBIT10                                    EQU  0000FBFF     60*
NBIT11                                    EQU  0000F7FF     61*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE    11

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

NBIT12                                    EQU  0000EFFF     62*
NBIT13                                    EQU  0000DFFF     63*
NBIT14                                    EQU  0000BFFF     64*
NBIT15                                    EQU  00007FFF     65*
NBIT2                                     EQU  000000FB     51*
NBIT3                                     EQU  000000F7     52*
NBIT4                                     EQU  000000EF     53*
NBIT5                                     EQU  000000DF     54*
NBIT6                                     EQU  000000BF     55*
NBIT7                                     EQU  0000007F     56*
NBIT8                                     EQU  0000FEFF     58*
NBIT9                                     EQU  0000FDFF     59*
P                                P        SCT  00000000   2108*
SNAP_050                         P             00000118   2382  2384*
SNAP_100                         P             00000150   2427  2429*
SNAP_200                         P             00000172   2462  2464*
XBIT0                                     EQU  00000000     68*
XBIT1                                     EQU  00000001     69*
XBIT2                                     EQU  00000002     70*
XBIT3                                     EQU  00000003     71*
XBIT4                                     EQU  00000004     72*
XBIT5                                     EQU  00000005     73*
XBIT6                                     EQU  00000006     74*
XBIT7                                     EQU  00000007     75*
_CB_BAKUP_CMD1                            EQU  00005678    114*
_CB_BAKUP_CMD2                            EQU  00001234    115*
_CB_BAK_SUM_COD1                          EQU  5AA51234    112*
_CB_BAK_SUM_COD2                          EQU  A55A4321    113*
_CB_ERR_INFO_MEM                          EQU  00000080    138*
_CB_ERR_INFO_PSIZE                        EQU  00000008    139*
_CB_STS_BUF_1BLK                          EQU  00000040    117*  119 
_CB_STS_BUF_BLKMAX                        EQU  00000008    118*  119 
_CB_STS_BUF_MAX                           EQU  00000200    119*
_CB_TRD_BEFORE                            EQU  00000060    127*
_CB_TRD_BUF_DP_MAX                        EQU  00000080    131*
_CB_TRD_BUF_MAX                           EQU  00000800    128*
_CB_TRD_DP_1CNT                           EQU  00000008    130*
_CB_TRD_DP_CH                             EQU  00000004    123*
_CB_TRD_SMP_CNT                           EQU  00000080    126*
_CPUA_ET1_BLK                             EQU  00000100   2292* 2367  2383  2439 
_CPUA_ET1_OFFSET                          EQU  00008000   2294* 2447 
_CPUA_ET1_OFFSETSNP                       EQU  00000000   2297* 2463 
_CPUA_RCV_ACK_ET1                         IMPT 00000000   2089  2359 
_CPUA_RCV_INI_ET1                         IMPT 00000000   2087  2217 
_CPUA_REQ_OLD                    Bwkram1       0000000C   2577*
_CPUA_SND_DAT                             IMPT 00000000   2092  2476 
_CPUA_SND_END                             IMPT 00000000   2093 
_CPUA_SND_INI_ET1                         IMPT 00000000   2086  2255 
_CPUA_SND_REQ_ADR                         IMPT 00000000   2090  2446 
_CPUA_SND_REQ_CNT                         IMPT 00000000   2091  2444 
_CPUA_SND_REQ_ET1                         IMPT 00000000   2088  2358 
_CPU_REQ_DAT_CNT                 Bwkram1       00000004   2331  2365  2520  2540  2574*
_CPU_REQ_DAT_FLG                 Bwkram1       00000008   2174  2179  2307  2325  2536  2575*
_DUMMY_SUM_CODE                           EQU  5AA53CC3    105*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE    12

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

_ET1_CPUAB_BUF_MAX                        EQU  00000100   2066* 2292 
_ET1_CPUA_ADR_MAX                         EQU  00060000   2069*
_ET1_CPUB_ADR_MAX                         EQU  00008000   2067*
_ET1_CPU_HIGH_MOV                P        EXPT 00000000   2097  2110*
_ET1_CPU_MAIN_MOV                P        EXPT 00000020   2096  2146*
_ET1_DATA_COD                             EQU  5A3CC3A5   2073* 2516 
_ET1_INIEND_MOVE                 P             00000094   2169  2248*
_ET1_INITAL_CHK                  P             00000064   2157  2207*
_ET1_INITAL_FLG                  Bwkram1  EXPT 00000000   2114  2151  2211  2224  2570  2571*
_ET1_INIT_ACK                             EQU  56789ABC   2072* 2219 
_ET1_INIT_REQ                             EQU  12345678   2071* 2253 
_ET1_RDWR2_BUFMAX                         EQU  00000020   2077*
_ET1_TRD_DATA_SEND               P             000000AC   2122  2303*
_ET1_WD_HAND_COD                          EQU  00001234   2078*
_SEQAB_DP_TOP                             IMPT 00000000   2285  2336 
_SNAPBUF_TOP                              IMPT 00000000   2284  2428 
_SNAP_MODE_SEL                   Bwkram1       00000010   2343  2378  2423  2458  2578*
_START_ACK_COD                            EQU  00004321    213*
_START_REQ_COD                            EQU  00009876    212*
_TREND_DATA_END                           IMPT 00000000   2282  2367 
_TREND_INFO_TOP                           IMPT 00000000   2281  2367  2412 
_VUPCHECK_EQU                             EQU  11AB3739     98*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    11/14/21 17:25:24                                                  PAGE    13

*** SECTION DATA LIST

SECTION                          ATTRIBUTE    SIZE             START

P                                REL-CODE    0000001F4        
Bwkram1                          REL-DATA    000000012        
