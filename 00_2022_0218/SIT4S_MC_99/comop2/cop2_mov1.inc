;	*******************************************
;	***					***
;	***					***
;	***					***
;	***		cop2			***
;	***		sit4->cop2		***
;	***		sit4<-cop2		***
;	***					***
;	***					***
;	***					***
;	*******************************************
;

	.MACRO COP_DAT_MOV1 SRC,L1,DST,L2,REG1,REG2,DTREG
	.AIF	_HARD_SEL_CPU	EQ _HARD_SIT4_CPU
	MOV.L	#\SRC,\REG1		;SIT4-CPUA
	MOV.L	#\DST,\REG2		;
;;;2013-01-10 不要	MOV.\L1	@\REG1,\DTREG		;
;;;2013-01-10 不要	MOV.\L2	\DTREG,@\REG2		;
	.AELSE
	MOV.L	#\DST,\REG1		;COP2-CPUC
	MOV.L	#\SRC,\REG2		;
	.AENDI
	MOV.\L1	@\REG1,\DTREG		;
	MOV.\L2	\DTREG,@\REG2		;
	.ENDM

	.MACRO COP_DAT_MPV1 SRC,L1,DST,L2,REG1,REG2,DTREG
	.AIF	_HARD_SEL_CPU	EQ _HARD_SIT4_CPU
	MOV.L	#\SRC,\REG1		;SIT4(CPUA SRC(COP2 DPRAM)->DST(CPUA DPRAM))
	MOV.L	#\DST,\REG2		;
;;;2013-01-10 不要	MOV.\L1	@\REG1,\DTREG		;
;;;2013-01-10 不要	MOV.\L2	\DTREG,@\REG2		;
	.AELSE
	MOV.L	#\DST,\REG1		;COP2
	MOV.L	#\SRC,\REG2		;
	.AENDI
	MOV.\L1	@\REG1,\DTREG		;
	MOV.\L2	\DTREG,@\REG2		;
	.ENDM

	.MACRO COP_DAT_MOV1_LOP SRC,L1,DST,L2,REG1,REG2,DTREG,LOPREG,CNT,ADRADD
	.AIF	_HARD_SEL_CPU	EQ _HARD_SIT4_CPU
	MOV.L	#\SRC,\REG1		;SIT4
	MOV.L	#\DST,\REG2		;
	.AELSE
	MOV.L	#\DST,\REG1		;COP2
	MOV.L	#\SRC,\REG2		;
	.AENDI
	MOV.L	#\CNT,\LOPREG

JMPLOP\@:
	TST \LOPREG,\LOPREG		;
	TST_BIT_OF JMP01\@		;
	MOV.\L1	@\REG1+,\DTREG		;
	MOV.\L2	\DTREG,@\REG2		;
	ADD	#-1,\LOPREG		;
	ADD	#\ADRADD,\REG2		;
	M_BRA JMPLOP\@
JMP01\@:
	.ENDM









;	-------- _CB_BAKUP_LOAD----------
;	ssa_dtmk.src call
_cop2_BAKdata_move:
	SUB_START
	SUB_END
	M_RTS


;	ssa_dtmk.src call
_cop2_PONdata_move:
	SUB_START
	SUB_END
	M_RTS

_cop2_SYSdata_move:
	SUB_START
	SUB_END
	M_RTS

;	ssa_dtmk.src call
_cop2_SV1data_move:
	SUB_START
	FAR_JSR	#_cop2_TUNSV1data_move,R0
	FAR_JSR	#_cop2_TUNSV2data_move,R0
	FAR_JSR	#_cop2_SV1data_move1,R0
	FAR_JSR	#_cop2_SV1data_move2,R0
	FAR_JSR	#_cop2_SV1data_move3,R0
	FAR_JSR	#_cop2_SV2data_move,R0

	SUB_END
	M_RTS

;
_cop2_TUNSV1data_move:
	SUB_START
	M_BRA	cop2_TUNSV1datamov_100	
	NOP
	NOP
	NOP
	NOP
cop2_TUNSV1datamov_100:
	M_BRA	cop2_TUNSV1datamov_200	
	NOP
	NOP
	NOP
	NOP
cop2_TUNSV1datamov_200:
	SUB_END
	M_RTS

;
_cop2_TUNSV2data_move:
	SUB_START
	SUB_END
	M_RTS

;	-----------------MOTION-----------------------------
_cop2_SV1data_move1:
	SUB_START
	COP_DAT_MOV1_LOP SRC=_SVP_OBJECT_POS_TOP,L1=L,DST=_COP2_SVP_OBJECT_POS_TOP,L2=L,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=_EQ_STEP_MX2,ADRADD=4;
	COP_DAT_MOV1_LOP SRC=_SVP_OBJECT_DIG_TOP,L1=W,DST=_COP2_SVP_OBJECT_DIG_TOP,L2=W,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=_EQ_STEP_MX2,ADRADD=2;
	COP_DAT_MOV1_LOP SRC=_SVP_OBJECT_SPD_TOP,L1=W,DST=_COP2_SVP_OBJECT_SPD_TOP,L2=W,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=_EQ_STEP_MX2,ADRADD=2;
	COP_DAT_MOV1_LOP SRC=_SVP_OBJECT_TIM_TOP,L1=L,DST=_COP2_SVP_OBJECT_TIM_TOP,L2=L,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=_EQ_STEP_MX2,ADRADD=4;
	COP_DAT_MOV1 SRC=_SVP_DAIHAI_ORG0	,L1=L,DST=_COP2_SVP_DAIHAI_ORG0	,L2=L,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_MRTION_SEL1	,L1=W,DST=_COP2_SVP_MRTION_SEL1	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_MTSTEP_MAXM	,L1=W,DST=_COP2_SVP_MTSTEP_MAXM	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_UPAREA_POS0	,L1=L,DST=_COP2_SVP_UPAREA_POS0	,L2=L,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_UPAREA_DIG0	,L1=W,DST=_COP2_SVP_UPAREA_DIG0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_UPAREA_SPD0	,L1=W,DST=_COP2_SVP_UPAREA_SPD0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_UPAREA_TIM0	,L1=W,DST=_COP2_SVP_UPAREA_TIM0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_DNAREA_INP0	,L1=W,DST=_COP2_SVP_DNAREA_INP0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_OBJARA_INP0	,L1=W,DST=_COP2_SVP_OBJARA_INP0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;


;	=== 2015-03-09(多段の荷重設定,荷重完了範囲) ====
	COP_DAT_MOV1_LOP SRC=_SVP_OBJECT_PRS_TOP,L1=W,DST=_COP2_SVP_OBJECT_PRS_TOP,L2=W,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=_EQ_STEP_MX2,ADRADD=2;
	COP_DAT_MOV1 SRC=_SVP_KAJOBJ_HAB,L1=W,DST=_COP2_SVP_KAJOBJ_HAB,L2=W,REG1=R1,REG2=R2,DTREG=R0						;



	SUB_END
	M_RTS

;
_cop2_SV1data_move2:
	SUB_START
	COP_DAT_MOV1 SRC=_PVP_KAJLIV_LFT	,L1=W,DST=_COP2_PVP_KAJLIV_LFT	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_PVP_KAJLIV_TTL	,L1=W,DST=_COP2_PVP_KAJLIV_TTL	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_PVP_KAJLIV_RIH	,L1=W,DST=_COP2_PVP_KAJLIV_RIH	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_OVERLIDE_COF	,L1=W,DST=_COP2_SVP_OVERLIDE_COF,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_SVP_DND_STOPDIG1	,L1=W,DST=_COP2_SVP_DND_STOPDIG1,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	SUB_END
	M_RTS

;
_cop2_SV1data_move3:
	SUB_START
	SUB_END
	M_RTS

;
_cop2_SV2data_move:
	SUB_START
	COP_DAT_MOV1 SRC=_PVP_ARA1_KAJ_R	,L1=W,DST=_COP2_PVP_ARA1_KAJ_R	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_PVP_ARA1_KAJ_L	,L1=W,DST=_COP2_PVP_ARA1_KAJ_L	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MOV1 SRC=_PVP_ARA1_KAJ_T	,L1=W,DST=_COP2_PVP_ARA1_KAJ_T	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	SUB_END
	M_RTS









;	***************************************************
;	***						***
;	***		実測				***
;	***		COP-->SIT->DISP			***
;	***		(NEW)				***
;	***************************************************
;	ssa_.src call??
_cop2_PV1data_move:
	SUB_START

	SUB_END
	M_RTS

;	***************************************************
;	***						***
;	***		実測				***
;	***		VER COP2->CPUA-CPUB		***
;	***		(NEW)				***
;	***************************************************
;	ssa_K.src call
;	CPUA:COP2.DPRAM-->CPUB.DPRAM
;
_cop2_VERdata_move:
	SUB_START

;	ASCIIﾃﾞｰﾀ (1WORDでｷｬﾗｸﾀする 6char) SH4-->
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*0	,L1=W,DST=_PVP_CB_C_VER+2*0	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*1	,L1=W,DST=_PVP_CB_C_VER+2*1	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*2	,L1=W,DST=_PVP_CB_C_VER+2*2	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*3	,L1=W,DST=_PVP_CB_C_VER+2*3	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*4	,L1=W,DST=_PVP_CB_C_VER+2*4	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;
	COP_DAT_MPV1 SRC=_COP2_PVP_CB_C_VER+2*5	,L1=W,DST=_PVP_CB_C_VER+2*5	,L2=W,REG1=R1,REG2=R2,DTREG=R0	;

;	ﾊﾟﾗﾒｰﾀﾊﾞｰｼﾞｮﾝ HEX data
	COP_DAT_MPV1 SRC=_COP2_PVP_PAR_C_VER	,L1=W,DST=_PVP_PAR_C_VER,L2=W,REG1=R1,REG2=R2,DTREG=R0	;

;	ﾊﾟﾗﾒｰﾀﾊﾞｰｼﾞｮﾝ 末尾ｷｬﾗｸﾀ ASCII(2BYTE)
	COP_DAT_MPV1 SRC=_COP2_PVP_PAR_C_CHAR	,L1=W,DST=_PVP_PAR_C_CHAR,L2=W,REG1=R1,REG2=R2,DTREG=R0	;

;ﾃｰﾌﾞﾙﾊﾞｰｼﾞｮﾝ HEX data（未使用）
	COP_DAT_MPV1 SRC=_COP2_PVP_TBL_C_VER	,L1=W,DST=_PVP_TBL_C_VER,L2=W,REG1=R1,REG2=R2,DTREG=R0	;

;ﾃｰﾌﾞﾙﾊﾞｰｼﾞｮﾝ 末尾ｷｬﾗｸﾀ ASCII(2BYTE)	
	COP_DAT_MPV1 SRC=_COP2_PVP_TBL_C_CHAR	,L1=W,DST=_PVP_TBL_C_CHAR,L2=W,REG1=R1,REG2=R2,DTREG=R0	;







	SUB_END
	M_RTS


;	***************************************************
;	***						***
;	***		seq				***
;	***						***
;	***************************************************
;	ssa_dtmk.src call
_cop2_SEQCMD1data_move:
	SUB_START
	COP_DAT_MOV1_LOP SRC=_SEQ_DP_TOP+340*2	,L1=W,DST=_COP2_SEQ_DP_340,L2=W,REG1=R1,REG2=R2,DTREG=R0,LOPREG=R4,CNT=30,ADRADD=2;//30word
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+024*2	,L1=W,DST=_COP2_SEQ_DP_024,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+028*2	,L1=W,DST=_COP2_SEQ_DP_028,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+029*2	,L1=W,DST=_COP2_SEQ_DP_029,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+032*2	,L1=W,DST=_COP2_SEQ_DP_032,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+033*2	,L1=W,DST=_COP2_SEQ_DP_033,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+050*2	,L1=W,DST=_COP2_SEQ_DP_050,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+056*2	,L1=W,DST=_COP2_SEQ_DP_056,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+109*2	,L1=W,DST=_COP2_SEQ_DP_109,L2=W,REG1=R1,REG2=R2,DTREG=R0;//

	COP_DAT_MOV1 SRC=_SEQ_DP_TOP+053*2	,L1=W,DST=_COP2_SEQ_DP_053,L2=W,REG1=R1,REG2=R2,DTREG=R0;//
	SUB_END
	M_RTS

_cop2_SEQSTS1data_move:
	SUB_START
;	-----------------(add seq)------（その他はTﾘﾝｸ領域をcpub経由）
	COP_DAT_MPV1 SRC=_COP2_SEQ_DP_200+5*2	,L1=W,DST=_SQ_CBWK_TOP+_WKSQCB205,L2=W,REG1=R1,REG2=R2,DTREG=R0		;205.0
	SUB_END
	M_RTS

;	MOV.L	#_SEQ_DP_TOP+_DPSQ024,R1	; 
;	.GLOBAL	_COP2_SEQ_DP_TOP1;c/b:cmd 340~379(80w=160b)
;	.GLOBAL	_COP2_SEQ_DP_32;c/b:cmd 340~379(80w=160b)
;	.GLOBAL	_COP2_SEQ_DP_32;c/b:cmd 340~379(80w=160b)
;
;	***************************************************
;	***						***
;	***		dio情報				***
;	***						***
;	***************************************************
;	1msec 一括レベル
;	ssa_khad.src/_DI_LOAD call
	.EXPORT	_dio_data_move1
	.IMPORT	_REAL_INP1_DATA
	.IMPORT	_FACT_IN_DATA
	.IMPORT	_FDEV_IN_DATA
	.IMPORT	_RACT_IN_DATA
	.IMPORT	_RDEV_IN_DATA
	
_dio_data_move1:
	SUB_START


	SUB_END
	M_RTS
