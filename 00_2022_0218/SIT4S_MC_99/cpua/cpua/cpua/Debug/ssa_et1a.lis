*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     1
PROGRAM NAME =

    1                               1     ;       ***************************************************
    2                               2     ;       ***                                             ***
    3                               3     ;       ***                                             ***
    4                               4     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送,mem,dp)     ***
    5                               5     ;       ***                                             ***
    6                               6     ;       ***                                             ***
    7                               7     ;       ***************************************************
 2089                              16     
 2090                              17     ;       ===========================================
 2091                              18     ;       ===             ET1 TOREND DATA         ===
 2092                              19     ;       ===========================================
 2093                              20             .IMPORT         _CPUA_SND_INI_ET1       ;INITAL CODE REQ
 2094                              21             .IMPORT         _CPUA_RCV_INI_ET1       ;INITAL CODE ACK
 2095                              22             .IMPORT         _CPUA_SND_REQ_ET1       ;H'12345678(req)
 2096                              23             .IMPORT         _CPUA_RCV_ACK_ET1       ;H'87654321(ack)
 2097                              24             .IMPORT         _CPUA_SND_REQ_ADR       ;TOPADRESS (192K+32K 256Kbyte)
 2098                              25             .IMPORT         _CPUA_SND_REQ_CNT       ;1~128個
 2099                              26             .IMPORT         _CPUA_SND_DAT           ;(256byte MAX)
 2100                              27             .IMPORT         _CPUA_SND_END           ;
 2101                              28     
 2102                              29     
 2103                              30             .EXPORT         _ET1_CPU_MAIN_MOV
 2104                              31             .EXPORT         _ET1_CPU_HIGH_MOV
 2105                              32     
 2106                              33     
 2107                              34     ;       ***************************************************
 2108                              35     ;       ***                                             ***
 2109                              36     ;       ***                                             ***
 2110                              37     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送)            ***
 2111                              38     ;       ***     (high:TREND)                            ***
 2112                              39     ;       ***                                             ***
 2113                              40     ;       ***                                             ***
 2114                              41     ;       ***************************************************
 2115 00000000                     42             .SECTION        P,CODE                  ;
 2116 00000000                     43             .ALIGN  4                                       ;
 2117 00000000                     44     _ET1_CPU_HIGH_MOV
 2118                              45             SUB_START
 2119 00000000 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2120                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2121 00000002 D105                46             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2122 00000004 6011                47             MOV.W   @R1,R0                                  ;
 2123 00000006 C840                48             TST     #BIT6,R0                                ;
 2124                              49             TST_BIT_OF ET1_CPU_HIGHMV_END                   ;
 2125 00000008 8902                   M           BT      ET1_CPU_HIGHMV_END
 2126                              50     
 2127                              51     ;       ---------- ET1/CPUA ﾃﾞｰﾀ転送--------------
 2128                              52             FAR_JSR #_ET1_TRD_DATA_SEND,R0
 2129 0000000A D004                   M           MOV.L   #_ET1_TRD_DATA_SEND,R0          ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2130 0000000C 400B                   M           JSR     @R0                     ;
 2131 0000000E 0009                   M           NOP                                     ;
 2132                              53     
 2133 00000010                     54     ET1_CPU_HIGHMV_END
 2134                              55             SUB_END
 2135                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2136 00000010 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2137                              56             M_RTS
 2138 00000012 000B                   M           RTS                             ;RTSの後ろの
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     2
PROGRAM NAME =

 2139 00000014 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2140                              57     
 2141                              58     ;       ***************************************************
 2142                              59     ;       ***                                             ***
 2143                              60     ;       ***                                             ***
 2144                              61     ;       ***     ET1-SOFT(設定転送,ﾄﾚﾝﾄﾞ転送)            ***
 2145                              62     ;       ***     (MAIN:SV)                               ***
 2146                              63     ;       ***                                             ***
 2147                              64     ;       ***************************************************
 2148                                     ***** BEGIN-POOL *****
 2149 00000016 0000                       ALIGNMENT CODE
 2150 00000018 00000000                   DATA FOR SOURCE-LINE 46
 2151 0000001C 00000000                   DATA FOR SOURCE-LINE 52
 2152                                     ***** END-POOL *****
 2153 00000020                     65     _ET1_CPU_MAIN_MOV
 2154                              66             SUB_START
 2155 00000020 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2156                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2157                              67     
 2158 00000022 D104                68             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2159 00000024 6011                69             MOV.W   @R1,R0                                  ;
 2160 00000026 C840                70             TST     #BIT6,R0                                ;
 2161                              71             TST_BIT_ON ET1_CPU_MNMV_100                     ;
 2162 00000028 8B08                   M           BF      ET1_CPU_MNMV_100
 2163                              72             FAR_JSR #_ET1_INITAL_CHK,R0                     ;
 2164 0000002A D003                   M           MOV.L   #_ET1_INITAL_CHK,R0             ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2165 0000002C 400B                   M           JSR     @R0                     ;
 2166 0000002E 0009                   M           NOP                                     ;
 2167                              73             M_BRA   ET1_CPU_MNMV_END                        ;
 2168 00000030 A00F                   M           BRA     ET1_CPU_MNMV_END
 2169 00000032 0009                   M           NOP
 2170                                     ***** BEGIN-POOL *****
 2171 00000034 00000000                   DATA FOR SOURCE-LINE 68
 2172 00000038 00000000                   DATA FOR SOURCE-LINE 72
 2173                                     ***** END-POOL *****
 2174 0000003C                     74     ET1_CPU_MNMV_100:
 2175                              75             FAR_JSR #_ET1_INIEND_MOVE,R0                    ;
 2176 0000003C D007                   M           MOV.L   #_ET1_INIEND_MOVE,R0            ;ﾃｰﾌﾞﾙｱﾄﾞﾚｽの内容をREGへ
 2177 0000003E 400B                   M           JSR     @R0                     ;
 2178 00000040 0009                   M           NOP                                     ;
 2179                              76     
 2180                              77     
 2181 00000042 D107                78             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2182 00000044 6011                79             MOV.W   @R1,R0                                  ;
 2183 00000046 2008                80             TST     R0,R0                                   ;
 2184                              81             TST_BIT_ON ET1_CPU_MNMV_200                     ;
 2185 00000048 8B02                   M           BF      ET1_CPU_MNMV_200
 2186 0000004A D105                82             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2187 0000004C 9004                83             MOV.W   #BIT0,R0                                ;
 2188 0000004E 2101                84             MOV.W   R0,@R1                                  ;
 2189 00000050                     85     ET1_CPU_MNMV_200:                                       ;
 2190 00000050 0009                86             NOP
 2191                              87     
 2192 00000052                     88     ET1_CPU_MNMV_END:
 2193                              89             SUB_END
 2194                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2195 00000052 4F26                   M           LDS.L   @R15+,PR                ;[必要]
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     3
PROGRAM NAME =

 2196                              90             M_RTS
 2197 00000054 000B                   M           RTS                             ;RTSの後ろの
 2198 00000056 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2199                              91     
 2200                              92     
 2201                              93     ;       ***************************************************
 2202                              94     ;       ***                                             ***
 2203                              95     ;       ***                                             ***
 2204                              96     ;       ***     INITAL                                  ***
 2205                              97     ;       ***     (MAIN)                                  ***
 2206                              98     ;       ***                                             ***
 2207                              99     ;       ***************************************************
 2208                                     ***** BEGIN-POOL *****
 2209 00000058 0001                       DATA FOR SOURCE-LINE 83
 2210 0000005A 0000                       ALIGNMENT CODE
 2211 0000005C 00000000                   DATA FOR SOURCE-LINE 75
 2212 00000060 00000000                   DATA FOR SOURCE-LINE 78,82
 2213                                     ***** END-POOL *****
 2214 00000064                    100     _ET1_INITAL_CHK:
 2215                             101             SUB_START
 2216 00000064 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2217                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2218 00000066 D108               102             MOV.L   #_ET1_INITAL_FLG,R1                     ;
 2219 00000068 6011               103             MOV.W   @R1,R0                                  ;
 2220 0000006A C840               104             TST     #BIT6,R0                                ;
 2221                             105             TST_BIT_ON ET1_INIT_CHK_END                     ;
 2222 0000006C 8B08                   M           BF      ET1_INIT_CHK_END
 2223                             106     
 2224 0000006E D107               107             MOV.L   #_CPUA_RCV_INI_ET1,R1           ;
 2225 00000070 6012               108             MOV.L   @R1,R0                                  ;
 2226 00000072 D407               109             MOV.L   #_ET1_INIT_ACK,R4                       ;
 2227 00000074 3040               110             CMP/EQ  R4,R0                                   ;
 2228 00000076 8B03               111             BF      ET1_INIT_CHK_END                        ;未完了
 2229                             112     
 2230                             113             MEM1_BIT0_TO_BIT7_ORSET MEM=_ET1_INITAL_FLG,LG=W,BIT=BIT6,WKREG=R1      ;bit-set
 2231 00000078 D103                   M           MOV.L   #_ET1_INITAL_FLG,R1             ;
 2232 0000007A 6011                   M           MOV.W   @R1,R0          ;
 2233 0000007C CB40                   M           OR      #BIT6,R0                ;
 2234 0000007E 2101                   M           MOV.W   R0,@R1          ;
 2235                             114     
 2236 00000080                    115     ET1_INIT_CHK_END:
 2237                             116             SUB_END
 2238                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2239 00000080 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2240                             117             M_RTS
 2241 00000082 000B                   M           RTS                             ;RTSの後ろの
 2242 00000084 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2243                             118     
 2244                             119     ;       ***********************************
 2245                             120     ;       ***                             ***
 2246                             121     ;       ***     INITAL-CODE             ***
 2247                             122     ;       ***                             ***
 2248                             123     ;       ***********************************
 2249                                     ***** BEGIN-POOL *****
 2250 00000086 0000                       ALIGNMENT CODE
 2251 00000088 00000000                   DATA FOR SOURCE-LINE 102,113
 2252 0000008C 00000000                   DATA FOR SOURCE-LINE 107
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     4
PROGRAM NAME =

 2253 00000090 56789ABC                   DATA FOR SOURCE-LINE 109
 2254                                     ***** END-POOL *****
 2255 00000094                    124     _ET1_INIEND_MOVE:
 2256                             125             SUB_START
 2257 00000094 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2258                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2259                             126     
 2260 00000096 D003               127             MOV.L   #_ET1_INIT_REQ,R0
 2261                             128             REG_MOV_TO_MEM  DST_ADR=_CPUA_SND_INI_ET1,L1=L,DT_REG=R0,WKREG1=R1
 2262 00000098 D103                   M           MOV.L   #_CPUA_SND_INI_ET1,R1   ;DST_ADR
 2263 0000009A 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2264                             129     
 2265                             130     
 2266                             131             SUB_END
 2267                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2268 0000009C 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2269                             132             M_RTS
 2270 0000009E 000B                   M           RTS                             ;RTSの後ろの
 2271 000000A0 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2272                             133     
 2273                             134     ;       ***********************************
 2274                             135     ;       ***                             ***
 2275                             136     ;       ***     Input R2                ***
 2276                             137     ;       ***                             ***
 2277                             138     ;       ***********************************
 2278                             139     
 2279                             140     
 2280                             141     ;       ***********************************
 2281                             142     ;       ***                             ***
 2282                             143     ;       ***     CPUA-->ET1              ***
 2283                             144     ;       ***             DATA,TRIG       ***
 2284                             145     ;       ***                             ***
 2285                             146     ;       ***********************************
 2286                             147     ;       128byte単位で7FFFまで転送する
 2287                             148     
 2288                             149             .IMPORT _TREND_INFO_TOP                                         ;0c180000
 2289                             150             .IMPORT _TREND_DATA_END
 2290                             151     
 2291                             152             .IMPORT _SNAPBUF_TOP    ;
 2292                             153             .IMPORT _SEQAB_DP_TOP
 2293                             154     
 2294                                     ***** BEGIN-POOL *****
 2295 000000A2 0000                       ALIGNMENT CODE
 2296 000000A4 12345678                   DATA FOR SOURCE-LINE 127
 2297 000000A8 00000000                   DATA FOR SOURCE-LINE 128
 2298                                     ***** END-POOL *****
 2299          00000100           155     _CPUA_ET1_BLK           .EQU    _ET1_CPUAB_BUF_MAX                      ;
 2300                             156     _CPUA_ET1_ADRMAX        .DEFINE "(_TREND_DATA_END-_TREND_INFO_TOP)"     ;0c1c08d0-0c180100
                                          =00407D0
 2301          00008000           157     _CPUA_ET1_OFFSET        .EQU    H'8000                                  ;
 2302                             158     
 2303                             159     _CPUA_ET1_ADRMAXSNP     .DEFINE "640*480"                               ;H'25800()WORD=307
                                          200BYTE(4B000)
 2304          00000000           160     _CPUA_ET1_OFFSETSNP     .EQU    H'0                                     ;0C1E0000~C22AFFF
 2305                             161     
 2306                             162     ;186368
 2307                             163     
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     5
PROGRAM NAME =

 2308                             164     ;通信データがなくなったのときに切り替える
 2309                             165     
 2310 000000AC                    166     _ET1_TRD_DATA_SEND:
 2311                             167             SUB_START
 2312 000000AC 4F22                   M           STS.L   PR,@-R15                ;[必要]
 2313                                 M   ;;;;;;; ADD     #-4,R15                 ;[不要?]
 2314 000000AE D103               168             MOV.L   #_CPU_REQ_DAT_FLG,R1                    ;
 2315 000000B0 6011               169             MOV.W   @R1,R0                                  ;
 2316 000000B2 2008               170             TST     R0,R0                                   ;
 2317                             171             TST_BIT_ON ET1_TRD_DATASEND_100                 ;
 2318 000000B4 8B04                   M           BF      ET1_TRD_DATASEND_100
 2319                             172             M_BRA   ET1_TRD_DATASEND_EXT                    ;
 2320 000000B6 A095                   M           BRA     ET1_TRD_DATASEND_EXT
 2321 000000B8 0009                   M           NOP
 2322                                     ***** BEGIN-POOL *****
 2323 000000BA 0000                       ALIGNMENT CODE
 2324 000000BC 00000000                   DATA FOR SOURCE-LINE 168
 2325                                     ***** END-POOL *****
 2326 000000C0                    173     ET1_TRD_DATASEND_100:
 2327 000000C0 C802               174             TST     #BIT1,R0                                ;
 2328                             175             TST_BIT_ON ET1_TRD_DATASEND_150                 ;
 2329 000000C2 8B19                   M           BF      ET1_TRD_DATASEND_150
 2330                             176     
 2331                             177             MEM1_BIT0_TO_BIT7_ORSET MEM=_CPU_REQ_DAT_FLG,LG=W,BIT=BIT1,WKREG=R1     ;bit-set
 2332 000000C4 D108                   M           MOV.L   #_CPU_REQ_DAT_FLG,R1            ;
 2333 000000C6 6011                   M           MOV.W   @R1,R0          ;
 2334 000000C8 CB02                   M           OR      #BIT1,R0                ;
 2335 000000CA 2101                   M           MOV.W   R0,@R1          ;
 2336 000000CC 200A               178             XOR     R0,R0
 2337                             179             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_CNT,L1=L,DT_REG=R0,WKREG1=R1
 2338 000000CE D107                   M           MOV.L   #_CPU_REQ_DAT_CNT,R1    ;DST_ADR
 2339 000000D0 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2340                             180     
 2341                             181     ;       --- 2013-12-12[MC]-- SNAP
 2342 000000D2 222A               182             XOR     R2,R2                                   ;通常
 2343 000000D4 D106               183             MOV.L   #_SEQAB_DP_TOP+151*2,R1                 ;
 2344 000000D6 6011               184             MOV.W   @R1,R0                                  ;
 2345 000000D8 C801               185             TST     #BIT0,R0                                ;ｽﾅｯﾌﾟﾓｰﾄﾞ
 2346                             186             TST_BIT_OF ET1_TRD_DATASEND_120                 ;
 2347 000000DA 8900                   M           BT      ET1_TRD_DATASEND_120
 2348 000000DC 9203               187             MOV.W   #1,R2                                   ;
 2349 000000DE                    188     ET1_TRD_DATASEND_120:
 2350 000000DE D105               189             MOV.L   #_SNAP_MODE_SEL,R1                      ;
 2351 000000E0 2121               190             MOV.W   R2,@R1                                  ;
 2352                             191     
 2353                             192             M_BRA   ET1_TRD_DATASEND_EXT                    ;
 2354 000000E2 A07F                   M           BRA     ET1_TRD_DATASEND_EXT
 2355 000000E4 0009                   M           NOP
 2356                             193     
 2357                                     ***** BEGIN-POOL *****
 2358 000000E6 0001                       DATA FOR SOURCE-LINE 187
 2359 000000E8 00000000                   DATA FOR SOURCE-LINE 177
 2360 000000EC 00000000                   DATA FOR SOURCE-LINE 179
 2361 000000F0 00000000                   DATA FOR SOURCE-LINE 183
 2362 000000F4 00000000                   DATA FOR SOURCE-LINE 189
 2363                                     ***** END-POOL *****
 2364 000000F8                    194     ET1_TRD_DATASEND_150:
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     6
PROGRAM NAME =

 2365 000000F8 D80B               195             MOV.L   #_CPUA_SND_REQ_ET1,R8                   ;
 2366 000000FA D90C               196             MOV.L   #_CPUA_RCV_ACK_ET1,R9                   ;
 2367 000000FC 6082               197             MOV.L   @R8,R0                                  ;
 2368 000000FE 6192               198             MOV.L   @R9,R1                                  ;
 2369 00000100 3010               199             CMP/EQ  R1,R0                                   ;
 2370 00000102 8B6F               200             BF      ET1_TRD_DATASEND_EXT                    ;NOT EQ.WAIT
 2371                             201     ;       -----------------------------------------------
 2372 00000104 D50A               202             MOV.L   #_CPU_REQ_DAT_CNT,R5                    ;
 2373 00000106 6252               203             MOV.L   @R5,R2                                  ;
 2374 00000108 D30A               204             MOV.L   #((_TREND_DATA_END-_TREND_INFO_TOP)/_CPUA_ET1_BLK)+1,R3 ;**[SNAP]
 2375                             205     
 2376                             206     ;================== SNAP CHANGE START=============
 2377                             207             PUSH_REG1 R0                    ;
 2378 0000010A 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2379                                 M                                           ;REG=>[SP]
 2380                                 M                                           ;"-4" FF,FF,FF,FC
 2381                             208             PUSH_REG1 R1                    ;
 2382 0000010C 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2383                                 M                                           ;REG=>[SP]
 2384                                 M                                           ;"-4" FF,FF,FF,FC
 2385 0000010E D10A               209             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2386 00000110 6011               210             MOV.W   @R1,R0                  ;
 2387 00000112 2008               211             TST     R0,R0                   ;
 2388                             212             TST_BIT_OF SNAP_050             ;
 2389 00000114 8900                   M           BT      SNAP_050
 2390 00000116 D309               213             MOV.L   #(640*480/_CPUA_ET1_BLK)+1,R3   ;**[SNAP]
 2391 00000118                    214     SNAP_050                                ;
 2392                             215             POP_REG1 R1                     ;
 2393                                 M                                   ; RE"+4" 00,00,00,04
 2394 00000118 61F6                   M           MOV.L   @R15+,R1        ;
 2395                             216             POP_REG1 R0                     ;
 2396                                 M                                   ; RE"+4" 00,00,00,04
 2397 0000011A 60F6                   M           MOV.L   @R15+,R0        ;
 2398                             217     ;================== SNAP CHANGE END=============
 2399                             218     
 2400 0000011C 3326               219             CMP/HI  R2,R3                                   ;R2 < R3
 2401 0000011E 890F               220             BT      ET1_TRD_DATASEND_200                    ;
 2402 00000120 222A               221             XOR     R2,R2                                   ;
 2403 00000122 2522               222             MOV.L   R2,@R5                                  ;
 2404                             223             M_BRA   ET1_TRD_DATASEND_900                    ;
 2405 00000124 A058                   M           BRA     ET1_TRD_DATASEND_900
 2406 00000126 0009                   M           NOP
 2407                             224     
 2408                                     ***** BEGIN-POOL *****
 2409 00000128 00000000                   DATA FOR SOURCE-LINE 195
 2410 0000012C 00000000                   DATA FOR SOURCE-LINE 196
 2411 00000130 00000000                   DATA FOR SOURCE-LINE 202
 2412 00000134 00000000                   DATA FOR SOURCE-LINE 204
 2413 00000138 00000000                   DATA FOR SOURCE-LINE 209
 2414 0000013C 000004B1                   DATA FOR SOURCE-LINE 213
 2415                                     ***** END-POOL *****
 2416 00000140                    225     ET1_TRD_DATASEND_200:                                   ;Input R2
 2417                             226     
 2418                             227     
 2419 00000140 D515               228             MOV.L   #_TREND_INFO_TOP,R5                     ;**[SNAP]
 2420                             229     
 2421                             230     ;================== SNAP CHANGE START=============
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     7
PROGRAM NAME =

 2422                             231             PUSH_REG1 R0                    ;
 2423 00000142 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2424                                 M                                           ;REG=>[SP]
 2425                                 M                                           ;"-4" FF,FF,FF,FC
 2426                             232             PUSH_REG1 R1                    ;
 2427 00000144 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2428                                 M                                           ;REG=>[SP]
 2429                                 M                                           ;"-4" FF,FF,FF,FC
 2430 00000146 D115               233             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2431 00000148 6011               234             MOV.W   @R1,R0                  ;
 2432 0000014A 2008               235             TST     R0,R0                   ;
 2433                             236             TST_BIT_OF SNAP_100             ;
 2434 0000014C 8900                   M           BT      SNAP_100
 2435 0000014E D514               237             MOV.L   #_SNAPBUF_TOP,R5        ;
 2436 00000150                    238     SNAP_100                                ;
 2437                             239             POP_REG1 R1                     ;
 2438                                 M                                   ; RE"+4" 00,00,00,04
 2439 00000150 61F6                   M           MOV.L   @R15+,R1        ;
 2440                             240             POP_REG1 R0                     ;
 2441                                 M                                   ; RE"+4" 00,00,00,04
 2442 00000152 60F6                   M           MOV.L   @R15+,R0        ;
 2443                             241     ;================== SNAP CHANGE END=============
 2444                             242     
 2445                             243     
 2446 00000154 931E               244             MOV.W   #_CPUA_ET1_BLK,R3                       ;256
 2447 00000156 332D               245             DMULS.L R2,R3                                   ;CNT*128byte
 2448 00000158 061A               246             STS.L   MACL,R6                                 ;
 2449                             247     
 2450 0000015A 4301               248             SHLR    R3
 2451 0000015C D111               249             MOV.L   #_CPUA_SND_REQ_CNT,R1                   ;
 2452 0000015E 2132               250             MOV.L   R3,@R1                                  ;WORD個数
 2453 00000160 D111               251             MOV.L   #_CPUA_SND_REQ_ADR,R1                   ;
 2454 00000162 D412               252             MOV.L   #_CPUA_ET1_OFFSET,R4                    ;**[SNAP]
 2455                             253     
 2456                             254     ;================== SNAP CHANGE START=============
 2457                             255             PUSH_REG1 R0                    ;
 2458 00000164 2F06                   M           MOV.L   R0,@-R15                ;PUSH=SP-4
 2459                                 M                                           ;REG=>[SP]
 2460                                 M                                           ;"-4" FF,FF,FF,FC
 2461                             256             PUSH_REG1 R1                    ;
 2462 00000166 2F16                   M           MOV.L   R1,@-R15                ;PUSH=SP-4
 2463                                 M                                           ;REG=>[SP]
 2464                                 M                                           ;"-4" FF,FF,FF,FC
 2465 00000168 D10C               257             MOV.L   #_SNAP_MODE_SEL,R1      ;
 2466 0000016A 6011               258             MOV.W   @R1,R0                  ;
 2467 0000016C 2008               259             TST     R0,R0                   ;
 2468                             260             TST_BIT_OF SNAP_200             ;
 2469 0000016E 8900                   M           BT      SNAP_200
 2470 00000170 D40F               261             MOV.L   #_CPUA_ET1_OFFSETSNP,R4 ;
 2471 00000172                    262     SNAP_200                                ;
 2472                             263             POP_REG1 R1                     ;
 2473                                 M                                   ; RE"+4" 00,00,00,04
 2474 00000172 61F6                   M           MOV.L   @R15+,R1        ;
 2475                             264             POP_REG1 R0                     ;
 2476                                 M                                   ; RE"+4" 00,00,00,04
 2477 00000174 60F6                   M           MOV.L   @R15+,R0        ;
 2478                             265     ;================== SNAP CHANGE END=============
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     8
PROGRAM NAME =

 2479                             266     
 2480 00000176 346C               267             ADD     R6,R4                                   ;
 2481 00000178 2142               268             MOV.L   R4,@R1                                  ;SAVE.ADRESS +8000
 2482 0000017A 356C               269             ADD     R6,R5                                   ;
 2483 0000017C D70D               270             MOV.L   #_CPUA_SND_DAT,R7                       ;
 2484                             271     
 2485 0000017E                    272     ET1_TRD_DATASEND_LOP:                                   ;ﾃﾞｰﾀ
 2486 0000017E 2338               273             TST     R3,R3                                   ;
 2487                             274             TST_BIT_OF ET1_TRD_DATASEND_800
 2488 00000180 891A                   M           BT      ET1_TRD_DATASEND_800
 2489 00000182 6155               275             MOV.W   @R5+,R1                                 ;ﾃﾞｰﾀ元
 2490                             276     
 2491                             277     ;debug
 2492 00000184 2118               278             TST     R1,R1
 2493                             279             TST_BIT_OF DEBUG_AAA
 2494 00000186 8900                   M           BT      DEBUG_AAA
 2495 00000188 0009               280             NOP
 2496 0000018A                    281     DEBUG_AAA
 2497 0000018A 2711               282             MOV.W   R1,@R7                                  ;dpram
 2498 0000018C 7702               283             ADD     #2,R7
 2499 0000018E 73FF               284             ADD     #-1,R3
 2500                             285             M_BRA   ET1_TRD_DATASEND_LOP
 2501 00000190 AFF5                   M           BRA     ET1_TRD_DATASEND_LOP
 2502 00000192 0009                   M           NOP
 2503                             286     
 2504                             287     ;       -------------(HAND)---------------------------------
 2505                                     ***** BEGIN-POOL *****
 2506 00000194 0100                       DATA FOR SOURCE-LINE 244
 2507 00000196 0000                       ALIGNMENT CODE
 2508 00000198 00000000                   DATA FOR SOURCE-LINE 228
 2509 0000019C 00000000                   DATA FOR SOURCE-LINE 233,257
 2510 000001A0 00000000                   DATA FOR SOURCE-LINE 237
 2511 000001A4 00000000                   DATA FOR SOURCE-LINE 249
 2512 000001A8 00000000                   DATA FOR SOURCE-LINE 251
 2513 000001AC 00008000                   DATA FOR SOURCE-LINE 252
 2514 000001B0 00000000                   DATA FOR SOURCE-LINE 261
 2515 000001B4 00000000                   DATA FOR SOURCE-LINE 270
 2516                                     ***** END-POOL *****
 2517 000001B8                    288     ET1_TRD_DATASEND_800:
 2518 000001B8 211A               289             XOR     R1,R1
 2519 000001BA 6082               290             MOV.L   @R8,R0                                  ;
 2520 000001BC 2008               291             TST     R0,R0                                   ;
 2521                             292             TST_BIT_ON ET1_TRD_DATASEND_820                 ;
 2522 000001BE 8B00                   M           BF      ET1_TRD_DATASEND_820
 2523 000001C0 D103               293             MOV.L   #_ET1_DATA_COD,R1                       ;
 2524 000001C2                    294     ET1_TRD_DATASEND_820:                                   ;
 2525 000001C2 2812               295             MOV.L   R1,@R8                                  ;NEW REQ
 2526                             296     
 2527 000001C4 D103               297             MOV.L   #_CPU_REQ_DAT_CNT,R1                    ;
 2528 000001C6 6012               298             MOV.L   @R1,R0                                  ;
 2529 000001C8 7001               299             ADD     #1,R0                                   ;
 2530 000001CA 2102               300             MOV.L   R0,@R1                                  ;
 2531                             301             M_BRA   ET1_TRD_DATASEND_EXT
 2532 000001CC A00A                   M           BRA     ET1_TRD_DATASEND_EXT
 2533 000001CE 0009                   M           NOP
 2534                             302     
 2535                             303     ;       -------------(END)---------------------------------
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE     9
PROGRAM NAME =

 2536                                     ***** BEGIN-POOL *****
 2537 000001D0 5A3CC3A5                   DATA FOR SOURCE-LINE 293
 2538 000001D4 00000000                   DATA FOR SOURCE-LINE 297
 2539                                     ***** END-POOL *****
 2540 000001D8                    304     ET1_TRD_DATASEND_900:
 2541 000001D8 200A               305             XOR     R0,R0                                                           ;
 2542                             306             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_FLG,L1=W,DT_REG=R0,WKREG1=R1       ;
 2543 000001DA D104                   M           MOV.L   #_CPU_REQ_DAT_FLG,R1    ;DST_ADR
 2544 000001DC 2101                   M           MOV.W   R0,@R1  ;DST_ADR
 2545 000001DE 200A               307             XOR     R0,R0                                                           ;
 2546                             308             REG_MOV_TO_MEM  DST_ADR=_CPU_REQ_DAT_CNT,L1=L,DT_REG=R0,WKREG1=R1       ;
 2547 000001E0 D103                   M           MOV.L   #_CPU_REQ_DAT_CNT,R1    ;DST_ADR
 2548 000001E2 2102                   M           MOV.L   R0,@R1  ;DST_ADR
 2549                             309     
 2550                             310     
 2551                             311     
 2552                             312     
 2553 000001E4                    313     ET1_TRD_DATASEND_EXT:
 2554                             314             SUB_END
 2555                                 M   ;;;;;;; ADD     #4,R15                  ;[不要?]
 2556 000001E4 4F26                   M           LDS.L   @R15+,PR                ;[必要]
 2557                             315             M_RTS
 2558 000001E6 000B                   M           RTS                             ;RTSの後ろの
 2559 000001E8 0009                   M           NOP                             ;@R15+,PRはﾀﾞﾒ
 2560                             316     
 2561                             317     
 2562                             318     
 2563                             319     ;       ***************************************************
 2564                             320     ;       ***                                             ***
 2565                             321     ;       ***                                             ***
 2566                             322     ;       ***             wkram定義                       ***
 2567                             323     ;       ***                                             ***
 2568                             324     ;       ***                                             ***
 2569                             325     ;       ***************************************************
 2570                                     ***** BEGIN-POOL *****
 2571 000001EA 0000                       ALIGNMENT CODE
 2572 000001EC 00000000                   DATA FOR SOURCE-LINE 306
 2573 000001F0 00000000                   DATA FOR SOURCE-LINE 308
 2574                                     ***** END-POOL *****
 2575 00000000                    326             .SECTION        Bwkram1,DATA                    ;
 2576 00000000                    327             .ALIGN  4                                       ;
 2577                             328             .EXPORT         _ET1_INITAL_FLG                 ; SHIMA(h1fは2009-08-13)
 2578 00000000 00000002           329     _ET1_INITAL_FLG         .SRES   2                       ;
 2579                             330     
 2580 00000004                    331             .ALIGN  4                                       ;
 2581 00000004 00000004           332     _CPU_REQ_DAT_CNT        .SRES   4                       ;
 2582 00000008 00000002           333     _CPU_REQ_DAT_FLG        .SRES   2                       ;
 2583 0000000C                    334             .ALIGN  4                                       ;
 2584 0000000C 00000004           335     _CPUA_REQ_OLD           .SRES   4                       ;
 2585 00000010 00000002           336     _SNAP_MODE_SEL          .SRES   2                       ;
 2586                             337     
 2587                             338             .END
  *****TOTAL ERRORS       0
  *****TOTAL WARNINGS     0
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE    10

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

BIT0                                      EQU  00000001     15* 2187  2345 
BIT1                                      EQU  00000002     16* 2327  2334 
BIT10                                     EQU  00000400     25*
BIT11                                     EQU  00000800     26*
BIT12                                     EQU  00001000     27*
BIT13                                     EQU  00002000     28*
BIT14                                     EQU  00004000     29*
BIT15                                     EQU  00008000     30*
BIT16                                     EQU  00010000     31*
BIT17                                     EQU  00020000     32*
BIT18                                     EQU  00040000     33*
BIT19                                     EQU  00080000     34*
BIT2                                      EQU  00000004     17*
BIT20                                     EQU  00100000     35*
BIT21                                     EQU  00200000     36*
BIT22                                     EQU  00400000     37*
BIT23                                     EQU  00800000     38*
BIT24                                     EQU  01000000     39*
BIT25                                     EQU  02000000     40*
BIT26                                     EQU  04000000     41*
BIT27                                     EQU  08000000     42*
BIT28                                     EQU  10000000     43*
BIT29                                     EQU  20000000     44*
BIT3                                      EQU  00000008     18*
BIT30                                     EQU  40000000     45*
BIT31                                     EQU  80000000     46*
BIT4                                      EQU  00000010     19*
BIT5                                      EQU  00000020     20*
BIT6                                      EQU  00000040     21* 2123  2160  2220  2233 
BIT7                                      EQU  00000080     22*
BIT8                                      EQU  00000100     23*
BIT9                                      EQU  00000200     24*
Bwkram1                          Bwkram1  SCT  00000000   2575*
DEBUG_AAA                        P             0000018A   2494  2496*
ET1_CPU_HIGHMV_END               P             00000010   2125  2133*
ET1_CPU_MNMV_100                 P             0000003C   2162  2174*
ET1_CPU_MNMV_200                 P             00000050   2185  2189*
ET1_CPU_MNMV_END                 P             00000052   2168  2192*
ET1_INIT_CHK_END                 P             00000080   2222  2228  2236*
ET1_TRD_DATASEND_100             P             000000C0   2318  2326*
ET1_TRD_DATASEND_120             P             000000DE   2347  2349*
ET1_TRD_DATASEND_150             P             000000F8   2329  2364*
ET1_TRD_DATASEND_200             P             00000140   2401  2416*
ET1_TRD_DATASEND_800             P             000001B8   2488  2517*
ET1_TRD_DATASEND_820             P             000001C2   2522  2524*
ET1_TRD_DATASEND_900             P             000001D8   2405  2540*
ET1_TRD_DATASEND_EXT             P             000001E4   2320  2354  2370  2532  2553*
ET1_TRD_DATASEND_LOP             P             0000017E   2485* 2501 
H_BYTE                                    EQU  00000000     82*
L_BYTE                                    EQU  00000001     81*
NBIT0                                     EQU  000000FE     49*
NBIT1                                     EQU  000000FD     50*
NBIT10                                    EQU  0000FBFF     60*
NBIT11                                    EQU  0000F7FF     61*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE    11

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

NBIT12                                    EQU  0000EFFF     62*
NBIT13                                    EQU  0000DFFF     63*
NBIT14                                    EQU  0000BFFF     64*
NBIT15                                    EQU  00007FFF     65*
NBIT2                                     EQU  000000FB     51*
NBIT3                                     EQU  000000F7     52*
NBIT4                                     EQU  000000EF     53*
NBIT5                                     EQU  000000DF     54*
NBIT6                                     EQU  000000BF     55*
NBIT7                                     EQU  0000007F     56*
NBIT8                                     EQU  0000FEFF     58*
NBIT9                                     EQU  0000FDFF     59*
P                                P        SCT  00000000   2115*
SNAP_050                         P             00000118   2389  2391*
SNAP_100                         P             00000150   2434  2436*
SNAP_200                         P             00000172   2469  2471*
XBIT0                                     EQU  00000000     68*
XBIT1                                     EQU  00000001     69*
XBIT2                                     EQU  00000002     70*
XBIT3                                     EQU  00000003     71*
XBIT4                                     EQU  00000004     72*
XBIT5                                     EQU  00000005     73*
XBIT6                                     EQU  00000006     74*
XBIT7                                     EQU  00000007     75*
_CB_BAKUP_CMD1                            EQU  00005678    114*
_CB_BAKUP_CMD2                            EQU  00001234    115*
_CB_BAK_SUM_COD1                          EQU  5AA51234    112*
_CB_BAK_SUM_COD2                          EQU  A55A4321    113*
_CB_ERR_INFO_MEM                          EQU  00000080    138*
_CB_ERR_INFO_PSIZE                        EQU  00000008    139*
_CB_STS_BUF_1BLK                          EQU  00000040    117*  119 
_CB_STS_BUF_BLKMAX                        EQU  00000008    118*  119 
_CB_STS_BUF_MAX                           EQU  00000200    119*
_CB_TRD_BEFORE                            EQU  00000060    127*
_CB_TRD_BUF_DP_MAX                        EQU  00000080    131*
_CB_TRD_BUF_MAX                           EQU  00000800    128*
_CB_TRD_DP_1CNT                           EQU  00000008    130*
_CB_TRD_DP_CH                             EQU  00000004    123*
_CB_TRD_SMP_CNT                           EQU  00000080    126*
_CPUA_ET1_BLK                             EQU  00000100   2299* 2374  2390  2446 
_CPUA_ET1_OFFSET                          EQU  00008000   2301* 2454 
_CPUA_ET1_OFFSETSNP                       EQU  00000000   2304* 2470 
_CPUA_RCV_ACK_ET1                         IMPT 00000000   2096  2366 
_CPUA_RCV_INI_ET1                         IMPT 00000000   2094  2224 
_CPUA_REQ_OLD                    Bwkram1       0000000C   2584*
_CPUA_SND_DAT                             IMPT 00000000   2099  2483 
_CPUA_SND_END                             IMPT 00000000   2100 
_CPUA_SND_INI_ET1                         IMPT 00000000   2093  2262 
_CPUA_SND_REQ_ADR                         IMPT 00000000   2097  2453 
_CPUA_SND_REQ_CNT                         IMPT 00000000   2098  2451 
_CPUA_SND_REQ_ET1                         IMPT 00000000   2095  2365 
_CPU_REQ_DAT_CNT                 Bwkram1       00000004   2338  2372  2527  2547  2581*
_CPU_REQ_DAT_FLG                 Bwkram1       00000008   2181  2186  2314  2332  2543  2582*
_DUMMY_SUM_CODE                           EQU  5AA53CC3    105*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE    12

*** CROSS REFERENCE LIST

NAME                             SECTION  ATTR VALUE             SEQUENCE

_ET1_CPUAB_BUF_MAX                        EQU  00000100   2073* 2299 
_ET1_CPUA_ADR_MAX                         EQU  00060000   2076*
_ET1_CPUB_ADR_MAX                         EQU  00008000   2074*
_ET1_CPU_HIGH_MOV                P        EXPT 00000000   2104  2117*
_ET1_CPU_MAIN_MOV                P        EXPT 00000020   2103  2153*
_ET1_DATA_COD                             EQU  5A3CC3A5   2080* 2523 
_ET1_INIEND_MOVE                 P             00000094   2176  2255*
_ET1_INITAL_CHK                  P             00000064   2164  2214*
_ET1_INITAL_FLG                  Bwkram1  EXPT 00000000   2121  2158  2218  2231  2577  2578*
_ET1_INIT_ACK                             EQU  56789ABC   2079* 2226 
_ET1_INIT_REQ                             EQU  12345678   2078* 2260 
_ET1_RDWR2_BUFMAX                         EQU  00000020   2084*
_ET1_TRD_DATA_SEND               P             000000AC   2129  2310*
_ET1_WD_HAND_COD                          EQU  00001234   2085*
_SEQAB_DP_TOP                             IMPT 00000000   2292  2343 
_SNAPBUF_TOP                              IMPT 00000000   2291  2435 
_SNAP_MODE_SEL                   Bwkram1       00000010   2350  2385  2430  2465  2585*
_START_ACK_COD                            EQU  00004321    213*
_START_REQ_COD                            EQU  00009876    212*
_TREND_DATA_END                           IMPT 00000000   2289  2374 
_TREND_INFO_TOP                           IMPT 00000000   2288  2374  2419 
_VUPCHECK_EQU                             EQU  11AB3739     98*
*** SuperH RISC engine ASSEMBLER V.7.01.02.000 ***    12/13/20 18:21:07                                                  PAGE    13

*** SECTION DATA LIST

SECTION                          ATTRIBUTE    SIZE             START

P                                REL-CODE    0000001F4        
Bwkram1                          REL-DATA    000000012        
